# אסטרטגיית ניתוח PDF - מערכת הערכת רישוי עסקים

## סקירה כללית

מסמך זה מתאר את האסטרטגיה לניתוח קבצי PDF של דרישות רישוי עסקים וחילוץ מידע מובנה לשימוש במערכת.

## מטרות הניתוח

### 1. חילוץ מידע מובנה
- זיהוי דרישות רישוי ספציפיות
- חילוץ פרטים טכניים (גודל, תפוסה, עלויות)
- מיפוי בין סוגי עסק לדרישות
- זיהוי גופים מאשרים ולוחות זמנים

### 2. יצירת מבנה נתונים אחיד
- המרה לפורמט JSON מובנה
- תאימות עם מערכת ההתאמה הקיימת
- תמיכה בחיפוש וסינון מתקדם
- אפשרות לעדכון ועריכה

### 3. שיפור דיוק ההתאמה
- נתונים אמיתיים ומעודכנים
- התאמה מדויקת למאפייני עסק
- עדכון אוטומטי של דרישות
- אימות נתונים מול מקורות רשמיים

## אסטרטגיית חילוץ נתונים

### 1. זיהוי דרישות (Requirements Detection)

#### דפוסי זיהוי:
```javascript
const requirementPatterns = [
  /רישיון\s+[^\.]+/gi,           // רישיון עסק, רישיון בריאות
  /אישור\s+[^\.]+/gi,            // אישור בטיחות, אישור גז
  /תעודה\s+[^\.]+/gi,            // תעודת כשירות, תעודת בטיחות
  /היתר\s+[^\.]+/gi,             // היתר בנייה, היתר עסק
  /הרשאה\s+[^\.]+/gi             // הרשאה מיוחדת
];
```

#### אלגוריתם זיהוי:
1. **סריקת טקסט** - חיפוש אחר דפוסי כותרות
2. **חלוקה לסעיפים** - זיהוי גבולות בין דרישות
3. **חילוץ תוכן** - איסוף טקסט רלוונטי לכל דרישה
4. **ניקוי ועיבוד** - הסרת טקסט לא רלוונטי

### 2. ניתוח תוכן (Content Analysis)

#### חילוץ מידע טכני:
```javascript
// חילוץ ספי גודל
const sizePatterns = [
  /(\d+)\s*מ["']ר/gi,            // 50 מ"ר, 100 מ"ר
  /עסקים?\s*מעל\s*(\d+)/gi,      // עסקים מעל 50
  /שטח\s*מעל\s*(\d+)/gi          // שטח מעל 100
];

// חילוץ ספי תפוסה
const seatingPatterns = [
  /(\d+)\s*מקומות?\s*ישיבה/gi,   // 30 מקומות ישיבה
  /תפוסה\s*מעל\s*(\d+)/gi,       // תפוסה מעל 50
  /(\d+)\s*אורחים?/gi            // 100 אורחים
];
```

#### זיהוי סוגי עסק:
```javascript
const businessTypeMapping = {
  'מסעדה': ['restaurant'],
  'קפה': ['cafe'],
  'חנות': ['retail'],
  'משרד': ['office'],
  'סדנה': ['workshop'],
  'מחסן': ['warehouse'],
  'מזון': ['restaurant', 'cafe'],
  'משקאות': ['cafe', 'restaurant']
};
```

### 3. מיפוי קטגוריות (Category Mapping)

#### חוקי מיפוי:
```javascript
const categoryRules = {
  'safety': {
    keywords: ['בטיחות', 'אש', 'גז', 'מכבי', 'פינוי'],
    patterns: [/בטיחות\s+אש/gi, /אישור\s+גז/gi]
  },
  'health': {
    keywords: ['בריאות', 'מזון', 'היגיינה', 'משרד הבריאות'],
    patterns: [/רישיון\s+בריאות/gi, /תנאי\s+היגיינה/gi]
  },
  'licensing': {
    keywords: ['רישיון', 'היתר', 'תעודה', 'הרשאה'],
    patterns: [/רישיון\s+עסק/gi, /היתר\s+עסק/gi]
  }
};
```

### 4. חילוץ פרטים כספיים (Financial Data Extraction)

#### דפוסי עלות:
```javascript
const costPatterns = [
  /(\d+)\s*-\s*(\d+)\s*₪/gi,     // 500-1000 ₪
  /(\d+)\s*₪/gi,                  // 500 ₪
  /עלות[:\s]*(\d+)/gi,           // עלות: 500
  /מחיר[:\s]*(\d+)/gi            // מחיר: 500
];
```

#### דפוסי זמן:
```javascript
const timePatterns = [
  /(\d+)\s*-\s*(\d+)\s*ימים?/gi, // 30-60 ימים
  /(\d+)\s*ימים?/gi,             // 30 ימים
  /(\d+)\s*שבועות?/gi,           // 4 שבועות
  /(\d+)\s*חודשים?/gi            // 2 חודשים
];
```

## אסטרטגיית עיבוד מתקדמת

### 1. עיבוד היררכי (Hierarchical Processing)

#### רמות עיבוד:
1. **רמה 1 - זיהוי בסיסי**: חיפוש דפוסי כותרות
2. **רמה 2 - חילוץ תוכן**: איסוף טקסט רלוונטי
3. **רמה 3 - ניתוח סמנטי**: הבנת משמעות התוכן
4. **רמה 4 - מיפוי מבני**: המרה לפורמט מובנה

### 2. עיבוד הקשר (Context Processing)

#### ניתוח הקשר:
```javascript
// זיהוי הקשר עסקי
const contextAnalysis = {
  businessType: extractBusinessType(surroundingText),
  size: extractSize(context),
  features: extractFeatures(context),
  location: extractLocation(context)
};
```

### 3. אימות נתונים (Data Validation)

#### כללי אימות:
```javascript
const validationRules = {
  size: (value) => value > 0 && value < 10000,
  cost: (value) => value >= 0,
  time: (value) => value > 0 && value < 365,
  priority: (value) => ['high', 'medium', 'low'].includes(value)
};
```

## אסטרטגיית AI Integration

### 1. שימוש ב-OpenAI לניתוח מתקדם

#### Prompts מותאמים:
```javascript
const analysisPrompt = `
נתח את הטקסט הבא וחלץ מידע מובנה על דרישות רישוי עסקים:

טקסט: ${text}

חלץ:
1. רשימת דרישות רישוי
2. פרטים טכניים (גודל, תפוסה, עלויות)
3. סוגי עסק רלוונטיים
4. גופים מאשרים
5. לוחות זמנים

פורמט תגובה: JSON מובנה
`;
```

### 2. Fallback Strategy

#### מערכת גיבוי:
1. **חילוץ בסיסי** - דפוסי regex
2. **ניתוח סמנטי** - AI processing
3. **אימות ידני** - בדיקה אנושית
4. **עדכון אוטומטי** - למידה מהתיקונים

## אסטרטגיית איכות נתונים

### 1. מדדי איכות

#### קריטריונים:
- **דיוק**: התאמה למקור המקורי
- **שלמות**: כל המידע הנדרש קיים
- **עקביות**: פורמט אחיד
- **עדכניות**: מידע מעודכן

### 2. בקרת איכות

#### תהליכי בדיקה:
```javascript
const qualityChecks = {
  completeness: checkRequiredFields(requirement),
  accuracy: validateAgainstSource(requirement, source),
  consistency: checkFormatConsistency(requirement),
  relevance: checkBusinessRelevance(requirement)
};
```

### 3. תיקון אוטומטי

#### אלגוריתמי תיקון:
- **השלמת נתונים חסרים** - השלמה אוטומטית
- **תיקון שגיאות פורמט** - ניקוי ועיצוב
- **אימות לוגי** - בדיקת עקביות
- **עדכון אוטומטי** - שיפור מתמיד

## אסטרטגיית הרחבה

### 1. תמיכה בפורמטים נוספים

#### פורמטים עתידיים:
- **Word Documents** (.docx)
- **Excel Files** (.xlsx)
- **Web Pages** (HTML)
- **Images** (OCR processing)

### 2. שיפורים טכניים

#### טכנולוגיות מתקדמות:
- **Machine Learning** - למידה מנתונים
- **Natural Language Processing** - עיבוד שפה טבעית
- **Computer Vision** - עיבוד תמונות
- **Blockchain** - אימות מקורות

### 3. אינטגרציה חיצונית

#### מקורות נתונים:
- **מערכות ממשלתיות** - API רשמיים
- **מאגרי מידע** - בסיסי נתונים ציבוריים
- **עדכונים אוטומטיים** - סינכרון בזמן אמת
- **אימות מקורות** - בדיקת אמינות

## מדדי הצלחה

### 1. מדדי דיוק
- **דיוק זיהוי**: >95% דרישות מזוהות נכון
- **דיוק חילוץ**: >90% פרטים מחולצים נכון
- **דיוק מיפוי**: >95% קטגוריות ממופות נכון

### 2. מדדי ביצועים
- **זמן עיבוד**: <30 שניות לקובץ PDF
- **גודל קובץ**: תמיכה עד 10MB
- **זיכרון**: <100MB שימוש
- **משתמשים**: תמיכה ב-50 משתמשים בו-זמנית

### 3. מדדי איכות
- **שלמות נתונים**: >90% שדות מלאים
- **עקביות פורמט**: 100% פורמט אחיד
- **עדכניות**: עדכון יומי
- **אמינות**: 99.9% זמינות

## סיכום

אסטרטגיית הניתוח מספקת מסגרת מקיפה לחילוץ ועיבוד נתוני רישוי עסקים מקבצי PDF. הגישה המשלבת חילוץ אוטומטי עם AI processing מבטיחה דיוק גבוה ואיכות נתונים מעולה.

המערכת בנויה להרחבה ועדכון מתמיד, תוך שמירה על ביצועים גבוהים ואמינות מלאה.
