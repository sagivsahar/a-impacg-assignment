# תיעוד שימוש ב-AI

## מודל נבחר
- OpenAI GPT-4
- סיבות: איכות ניסוח גבוהה בעברית, יכולת תמצות והיררכיית עדיפויות, יציבות API.

## פרומפטים עיקריים
דוגמת פרומפט (user):
```
אתה יועץ רישוי עסקים מומחה בישראל.
צור דוח רישוי מקצועי, מעשי ופעיל עבור מסעדה:

## מאפיינים ספציפיים של העסק:
- גודל: <X> מ"ר
- תפוסה: <Y> מקומות ישיבה

## דרישות רלוונטיות שזוהו:
<דרישות מקובצות לפי קטגוריות, עם ציטוטים מקוצרים ועדיפות>

---
## הוראות לדוח:
- התחל בדרישות קריטיות (בטיחות אש, יציאות חירום, בטיחות מזון, רישיונות חובה)
- לאחר מכן דרישות חשובות
- לבסוף דרישות כלליות
- לכל דרישה: מה לעשות, למה, השלכות אם לא, זמן ביצוע
- כתיבה בעברית פשוטה לבעל עסק
```

System message:
```
אתה מומחה לרישוי עסקים בישראל. אתה יוצר דוחות מקצועיים ומסודרים לעסקים.
```

## ניהול טוקנים
- הגבלת קטגוריות בפרומפט (עד 6)
- עד 2 דרישות ייחודיות לכל קטגוריה
- קיצור ציטוטים ל~160 תווים, שורה אחת
- `max_tokens` בבקשה: 2000, `temperature`: 0.3

## צמצום ועקביות
- סדר עדיפויות מוגדר מראש (בטיחות אש/יציאות חירום/בטיחות מזון/רישיונות חובה)
- שימוש בשדות מהשאלון (שטח/תפוסה) בתחילת הפרומפט

## Fallback
- בעת 429/מכסה/כשל API או context_lengthExceeded – המערכת מחזירה דוח גיבוי מובנה בצד השרת (`generatedBy: Fallback System`).
- ה-Frontend מציג הודעת הבהרה שהדוח אוטומטי וייתכנו פשרות ברמת הפירוט.

## לוגים ודיבוג
- השרת מחזיר `prompt`, `chatMessage`, ו-`responseRaw` (אם קיים) למטרות דיבוג.
- ה-Frontend מדפיס לקונסול את הפרומפט/הודעה לפי הנתונים המוחזרים מהשרת.
